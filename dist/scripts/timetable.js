!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e.syncscroll={})}(this,function(e){var t="Width",n="Height",o="Top",r="Left",i="scroll",a="client",s=[],c=function(){var e,c,l,d,u,p=document.getElementsByClassName("syncscroll");for(u in s)if(s.hasOwnProperty(u))for(e=0;e<s[u].length;e++)s[u][e].removeEventListener("scroll",s[u][e].syn,0);for(e=0;e<p.length;e++)if(d=0,l=p[e],u=l.getAttribute("name")){for(l=l.scroller||l,s[u]||(s[u]=[]),c=0;c<s[u].length;c++)s[u][c]==l&&(d=1);d||s[u].push(l),l.eX=l.eY=0,function(e,c){e.addEventListener("scroll",e.syn=function(){var l,d,u=s[c],p=e[i+r],f=e[i+o],m=p/(e[i+t]-e[a+t]),h=f/(e[i+n]-e[a+n]),v=0,E=0;for(p!=e.eX&&(v=1,e.eX=p),f!=e.eY&&(E=1,e.eY=f),d=0;d<u.length;d++)l=u[d],l!=e&&(v&&(p=Math.round(m*(l[i+t]-l[a+t])),l.eX=l[i+r]=p),E&&(f=Math.round(h*(l[i+n]-l[a+n])),l.eY=l[i+o]=f))},0)}(l,u)}};"complete"==document.readyState?c():window.addEventListener("load",c,0),e.reset=c});var Timetable=function(){this.scope={hourStart:9,hourEnd:17},this.locations=[],this.events=[]};Timetable.Renderer=function(e){if(!(e instanceof Timetable))throw new Error("Initialize renderer using a Timetable");this.timetable=e},function(){function e(e,n){return t(e)&&t(n)}function t(e){return n(e)&&o(e)}function n(e){return e===parseInt(e,10)}function o(e){return e>=0&&e<24}function r(e,t){return t.indexOf(e)!==-1}function i(e,t){var n=e instanceof Date&&t instanceof Date,o=e<t;return n&&o}function a(e,t){return t>=e?t-e:24+t-e}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e){var t=e<10?"0":"";return t+e+":00"}Timetable.prototype={setScope:function(t,n){if(!e(t,n))throw new RangeError("Timetable scope should consist of (start, end) in whole hours from 0 to 23");return this.scope.hourStart=t,this.scope.hourEnd=n,this},addLocations:function(e){function t(){return e instanceof Array}var n=this.locations;if(!t())throw new Error("Tried to add locations in wrong format");return e.forEach(function(e){if(r(e,n))throw new Error("Location already exists");n.push(e)}),this},addEvent:function(e,t,n,o,a){if(!r(t,this.locations))throw new Error("Unknown location");if(!i(n,o))throw new Error("Invalid time range: "+JSON.stringify([n,o]));var s="[object Object]"===Object.prototype.toString.call(a);return this.events.push({name:e,location:t,startDate:n,endDate:o,options:s?a:void 0}),this}},Timetable.Renderer.prototype={draw:function(e){function t(e){if(null===e)throw new Error("Timetable container not found")}function n(e){var t=e.appendChild(document.createElement("aside")),n=t.appendChild(document.createElement("ul"));o(n)}function o(e){for(var t=0;t<h.locations.length;t++){var n=e.appendChild(document.createElement("li")),o=n.appendChild(document.createElement("span"));o.className="row-heading",o.textContent=h.locations[t]}}function r(e){var t=e.appendChild(document.createElement("section")),n=i(t),o=t.appendChild(document.createElement("time"));o.className="syncscroll",o.setAttribute("name","scrollheader");var r=n.firstChild.offsetWidth+"px";l(o,r)}function i(e){var t=e.appendChild(document.createElement("header"));t.className="syncscroll",t.setAttribute("name","scrollheader");for(var n=t.appendChild(document.createElement("ul")),o=!1,r=!1,i=h.scope.hourStart;!o;){var a=n.appendChild(document.createElement("li")),s=a.appendChild(document.createElement("span"));s.className="time-label",s.textContent=c(i),i!==h.scope.hourEnd||h.scope.hourStart===h.scope.hourEnd&&!r||(o=!0),24===++i&&(i=0,r=!0)}return t}function l(e,t){var n=e.appendChild(document.createElement("ul"));n.style.width=t,n.className="room-timeline";for(var o=0;o<h.locations.length;o++){var r=n.appendChild(document.createElement("li"));d(h.locations[o],r)}}function d(e,t){for(var n=0;n<h.events.length;n++){var o=h.events[n];o.location===e&&u(o,t)}}function u(e,t){var n,o,r,i=void 0!==e.options,a=!1;i&&(n=void 0!==e.options.url,o=void 0!==e.options["class"],r=void 0!==e.options.data,a=void 0!==e.options.onClick);var s=n?"a":"span",c=t.appendChild(document.createElement(s)),l=c.appendChild(document.createElement("small")),d=c.appendChild(document.createElement("span")),u=d.appendChild(document.createElement("h5")),f=d.appendChild(document.createElement("p"));if(d.classList.add("description"),c.title=e.name,n&&(c.href=e.options.url),r)for(var v in e.options.data)c.setAttribute("data-"+v,e.options.data[v]);a&&c.addEventListener("click",function(t){e.options.onClick(e,h,t)}),c.className=o?"time-entry "+e.options["class"]:"time-entry",l.textContent=e.name,u.textContent=e.name,f.textContent="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce vulputate sagittis dui, eget porta enim tristique vel...",c.style.width=p(e),c.style.left=m(e)}function p(e){var t=e.startDate,n=e.endDate,o=f(t,n);return o/v*100+"%"}function f(e,t){return(t.getTime()-e.getTime())/1e3/60/60}function m(e){var t=h.scope.hourStart,n=e.startDate.getHours()+e.startDate.getMinutes()/60,o=a(t,n);return o/v*100+"%"}var h=this.timetable,v=a(h.scope.hourStart,h.scope.hourEnd),E=document.querySelector(e);t(E),s(E),n(E),r(E),syncscroll.reset()}}}();